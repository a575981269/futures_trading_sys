# SimNow 配置快速指南

## SimNow 模拟环境说明

- **BrokerID**: 统一为 9999
- **初始资金**: 两千万，支持入金，每日最多三次
- **交易品种**: 六所所有期货品种以及上期所、能源中心、中金所、广期所所有期权品种，以及郑商所、大商所部分期权品种
- **交易时间**: 与实际生产环境保持一致
- **终端认证**: 默认开启，程序化用户可以选择不开终端认证接入

## 服务器地址（看穿式前置，使用监控中心生产秘钥）

### 环境一：网上开户环境（默认）

#### 第一组（默认）
- **交易服务器**: `tcp://182.254.243.31:30001`
- **行情服务器**: `tcp://182.254.243.31:30011`

#### 第二组
- **交易服务器**: `tcp://182.254.243.31:30002`
- **行情服务器**: `tcp://182.254.243.31:30012`

#### 第三组
- **交易服务器**: `tcp://182.254.243.31:30003`
- **行情服务器**: `tcp://182.254.243.31:30013`

### 环境二：7x24 环境（CTP API 测试专用）

**注意：** 第二套环境仅服务于 CTP API 开发爱好者，仅为用户提供 CTP API 测试需求，不提供结算等其它服务。新注册用户需要等到第三个交易日才能使用。

- **交易服务器**: `tcp://182.254.243.31:40001`
- **行情服务器**: `tcp://182.254.243.31:40011`

**7x24 环境交易时间：**
- 交易日：16:00 ～ 次日 09:00
- 非交易日：16:00 ～ 次日 12:00

## 第一步：创建 .env 文件

在项目根目录创建 `.env` 文件，内容如下：

```env
# SimNow 模拟环境配置
CTP_BROKER_ID=9999
CTP_USER_ID=你的SimNow用户代码
CTP_PASSWORD=你的SimNow交易密码
CTP_ENVIRONMENT=normal  # 环境类型：normal（CTP主席系统）或 7x24（7x24环境）
CTP_APP_ID=simnow_client_test
CTP_AUTH_CODE=0000000000000000

# CTP主席系统服务器地址（正常交易时间）
CTP_MD_ADDRESS_NORMAL=tcp://182.254.243.31:30011
CTP_TRADE_ADDRESS_NORMAL=tcp://182.254.243.31:30001

# 7x24环境服务器地址（全天候）
CTP_MD_ADDRESS_7X24=tcp://182.254.243.31:40011
CTP_TRADE_ADDRESS_7X24=tcp://182.254.243.31:40001
```

**重要：** 
- 请将 `CTP_USER_ID` 替换为你的 SimNow 用户代码
- 请将 `CTP_PASSWORD` 替换为你的 SimNow 交易密码（注册时设置的密码）
- `CTP_ENVIRONMENT` 设置默认环境类型：
  - `normal`：CTP主席系统（正常交易时间）
  - `7x24`：7x24环境（全天候）
- 如果不设置 `CTP_ENVIRONMENT`，系统会使用交互式选择
- **服务器地址配置**：
  - `CTP_MD_ADDRESS_NORMAL` / `CTP_TRADE_ADDRESS_NORMAL`：CTP主席系统地址（优先使用）
  - `CTP_MD_ADDRESS_7X24` / `CTP_TRADE_ADDRESS_7X24`：7x24环境地址（优先使用）
  - 如果未设置环境特定变量，系统会使用默认值
  - 如需使用其他服务器组（第二组、第三组），修改对应的地址即可

## 第二步：运行测试

```bash
python test_simnow.py
```

运行测试时，系统会提示你选择环境：

```
请选择SimNow环境
============================================================
1. CTP主席系统（正常交易时间，端口30001/30011）
2. 7x24环境（全天候，端口40001/40011）
============================================================
请选择 [1/2，默认1]:
```

**重要提示：**
- **CTP 主席系统**（选项1）：
  - 在非交易时间不开放
  - 日盘：09:00-15:00
  - 夜盘：21:00-02:30（部分品种）
  - 清算时间：16:00-19:00（系统不开放，无法连接）
  - 系统会在连接前自动检查交易时间，如果不在交易时间内会提示下一个交易时间
- **7x24 环境**（选项2）：
  - 全天候开放（适合非交易时间测试）
  - 交易日：16:00 ～ 次日 09:00
  - 非交易日：16:00 ～ 次日 12:00
  - 新注册用户需要等到第三个交易日才能使用
- 也可以通过 `.env` 文件设置默认环境：
  ```env
  CTP_ENVIRONMENT=normal  # 或 7x24
  ```

## 账户信息总结

- **经纪公司代码**: 9999（统一）
- **默认APPID**: simnow_client_test
- **默认认证码**: 0000000000000000（16个0）
- **初始资金**: 两千万

详见 `README_SIMNOW.md` 获取更多信息。

